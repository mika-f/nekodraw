# REQUIREMENTS - HARDWARE

ここでは、 NekoDraw (および Stable Diffusion) を実行するのに必要なハードウェア要件を説明しています。

## Requirements

以下のハードウェア構成を推奨しています。

- 32GB 以上のメモリ
  - 手元の PC では、 512x512px の画像 (img2img) にて、 sd-v1-4.ckpt にて、 ~19GB のメモリを消費しています
  - これは、使用するモデルによります、 Waifu Diffusion の場合は手元で 24GB のメモリを消費しています
- GeForce RTX 3060 もしくは VRAM が 8GB 以上のビデオカード (NVIDIA 製)
  - 手元の PC では、 512x512px の画像 (img2img) にて、 ~3GB のメモリを消費しています
  - [Optimized SD](https://github.com/basujindal/stable-diffusion) を使用しているので、実際には通常の Stable Diffusion のように、 8GB も必要はありません

## キャンバス・フィルターサイズ

NekoDraw では、 CLIP STUDIO PAINT がクラッシュするのを防ぐため、 GPU メモリの割り当てに失敗した場合、処理を停止し、キャンバスの置き換えを行いません。  
目安として、以下の VRAM 容量の場合、次のキャンバスサイズおよびフィルターサイズの画像が生成可能です。  
なお、内部的には、どのようなキャンバス・フィルターサイズでも、縦横が 64 の倍数になるように内部的に調整されます。  
たとえば、 504x321 の画像に対して実行した場合、内部的には 512x384 へとリサイズを行い、 img2img を実行します。  
そのため、下記テーブルについて、自身が実行を行いたいサイズを満たす最小サイズについて見るのが正しい見方です。

| Size \ VRAM | 8GB (Unknown) | 12GB (GeForce RTX 3060) |
| :---------: | :-----------: | :---------------------: |
|   512x512   |       o       |            o            |
|   576x576   |       ?       |            o            |
|   640x640   |       ?       |            o            |
|   704x704   |       ?       |            o            |
|   768x768   |       ?       |            o            |
|   832x832   |       ?       |    x (Out of Memory)    |
|   896x896   |       x       |            x            |
|   960x960   |       x       |            x            |
|  1024x1024  |       x       |            x            |
